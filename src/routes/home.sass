@import '../settings.sass'
@import '../animations.sass'

.view
  overflow-x: hidden
  padding-top: 14rem

  > .inner
    display: flex
    flex-direction: column
    height: 100%
    margin: 0 auto
    max-width: $max-width
    padding: 5rem 3rem 10rem
    width: 100%

    @media screen and (min-width: 1025px)
      padding: 5rem 3rem 25rem

    > .welcome
      align-items: center
      display: flex
      height: #{'max(60vh, 100vh - 100rem)'}
      margin-top: -19rem
      min-height: 45rem
      position: relative

      @media screen and (min-width: 1100px)
        height: calc(100vh - 28rem)

      > h1
        font-weight: bold
        margin-left: 5rem
        margin-top: 10rem
        max-width: 75rem
        position: relative
        z-index: 1

        &:not(.categoryChange)
          opacity: 0
          animation: slideInLeft 0.3s, fadeIn 0.3s forwards

        &.firstView
          opacity: 0
          animation: slideInBottom 0.8s 1.1s, fadeIn 0.8s 1.1s forwards

        > span
          color: $color-red

      > .moon
        left: 34rem
        margin-top: -8rem
        position: absolute

        &.firstView
          opacity: 0
          animation: fadeIn 1.6s 0.2s forwards ease-in

    > .information
      display: flex
      position: relative
      pointer-events: none
      min-height: 80rem

      > .foundationPillar

        > h1
          color: $color-red
          margin: 0 0 5rem 5rem

        > p
          color: white
          font-size: 10rem
          font-weight: bold
          line-height: 13rem
          max-width: 80rem
          opacity: 1
          position: relative

          > span
            position: relative

            &.glitch
              position: relative
              mix-blend-mode: lighten

              &:after
                animation: glitch 3s infinite linear alternate-reverse
                background: #060A11
                clip: rect(0,900px,0,0)
                color: white
                content: attr(data-text)
                left: 0.2rem
                letter-spacing: -0.1rem
                overflow: hidden
                position: absolute
                text-shadow: -0.2rem 0 $color-red
                top: -0.3rem

              &:before
                animation: glitch 4s infinite linear alternate-reverse
                background: #060A11
                clip: rect(0,900px,0,0)
                color: white
                content: attr(data-text)
                left: -0.2rem
                letter-spacing: -0.1rem
                overflow: hidden
                position: absolute
                text-shadow: 0.2rem 0 #71A1FF
                top: -0.3rem

              &:nth-child(2)
                left: -0.3rem

                &:after, &:before
                  letter-spacing: -0.2rem

      > .moon
        position: absolute
        right: -28rem
        top: 2rem
        transition: opacity 0.7s ease
        z-index: -1

      > .moonSmall
        bottom: -15rem
        left: -12rem
        position: absolute
        transition: opacity 0.7s ease
        z-index: -1

    > .work
      margin-bottom: 27rem
      position: relative

      &.firstView
        opacity: 0
        transform: translateY(-8rem)
        animation: slideInTop 0.6s ease 2.2s forwards, fadeIn 1s ease 1.7s forwards

        @media screen and (min-width: 801px)
          transform: translateY(-15rem)

        > .filterBlock
          opacity: 0
          transform: translateY(-.8rem)
          animation: fadeInTop .8s ease 2.6s forwards

      > .text
        margin-left: 5rem

        > h1
          color: $color-red

        > p
          font-size: 1.8rem
          letter-spacing: 0.045rem
          line-height: 2.5rem
          margin-top: 2rem
          max-width: 37.7rem

      > .filterBlock
        @media screen and (min-width: 801px)
          margin: 0 0 0 5rem

      > .button
        left: calc(100% - 5rem)
        position: relative
        top: 4rem
        transform: translateX(-100%)
        background: #A1112A

        &:before
          content: ''
          background: #EC193E
          display: block
          position: absolute
          top: 0
          left: 0
          height: 100%
          width: 100%
          z-index: -1

      > .projects
        display: grid
        grid-gap: 2rem
        grid-template-columns: auto
        margin-top: 5rem

        > .project
          background: #eee
          height: 34rem

          &:first-child
            grid-column: span 2
            height: 40rem

      > .moon
        bottom: -8rem
        position: absolute
        right: -10rem

    @media screen and (max-width: 1000px)
      > .welcome > h1
        margin: auto

    @media screen and (max-width: 800px)
      > .welcome > h1, > .work > .text, > .information > .foundationPillar > h1
        font-size: 3rem
        margin-left: 0

      > .information > p, > .work > .text > p
        font-size: 1.6rem
        line-height: 2.2rem

      > .welcome > .moon
        left: calc(50% - 22.5rem)
        margin-top: -8rem
        position: absolute
        transform: scale(1)

      > .information
        min-height: 70rem

        > .foundationPillar
          max-width: 58rem

          > h1
            margin-bottom: 1rem

          > p
            font-size: 7.5rem
            line-height: 10rem

        > .moon
          right: -35rem

        > .moonSmall
          left: -28rem
          bottom: -20rem
          transform: scale(0.6) rotate(-40deg)

      > .work .button
        left: 50%
        transform: translateX(-50%)

    @media screen and (max-width: 1000px)
      > .welcome > h1
        //margin: auto

    @media screen and (max-width: 560px)
      > .information
        > .moon
          right: -45rem

        > .moonSmall
          left: -30rem

    @media screen and (max-width: 520px)
      > .information
        > .foundationPillar
          max-width: 100%
          margin-top: 50%

          > p
            font-size: 4.5rem
            line-height: 6rem

  $steps: 20
  @keyframes glitch
    @for $i from 0 through $steps
      #{percentage($i*(1/$steps))}
        clip: rect(random(100)+px,9999px,random(200)+px,0)
